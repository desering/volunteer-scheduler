---
import { panda } from "styled-system/jsx/factory";
import { button } from "styled-system/recipes/button";
import { ThemeSwitchButton } from "./theme-switch-button";
import { Container } from "styled-system/jsx";
---

<Container marginTop="4">
  <panda.nav display="flex" justifyContent="space-between">
    <panda.div display="flex" gap="4">
      <a href="/events" class={button({ variant: "outline" })}>Shifts</a>

      {
        Astro.locals.user?.roles?.includes("admin") && (
          <a href="/admin" class={button({ variant: "outline" })}>
            Manage Shifts
          </a>
        )
      }
    </panda.div>

    <panda.div display="flex" gap="4">
      <ThemeSwitchButton client:idle />

      {
        Astro.locals.user ? (
          <>
            <a href="/account" class={button({ variant: "solid" })}>
              {Astro.locals.user.preferredName}
            </a>
          </>
        ) : (
          <>
            <a href="/auth/login" class={button({ variant: "outline" })}>
              Login
            </a>
            <a href="/auth/register" class={button({ variant: "solid" })}>
              Register
            </a>
          </>
        )
      }
    </panda.div>
  </panda.nav>
</Container>
